# 树状数组(Fenwick Tree或Binary Index Tree)

## 要解决的问题

给一个数组array，求前n项和，array中的某一项可能发生变动。

思考一下这个问题，该问题有两个操作，一个是`Sum(n)`，一个是`Update(i, num)`.
我们可否找到一个算法，使得这两个操作复杂度都比较低？

## 背景知识

任何非负整数`num`二进制转换为十进制的公式为：

  num = a0\*2^0 + a1\*2^1 + a2\*2^2 + ... + an\*2^n

其中a0, a1, a2, ..., an为num二进制从低位到高位对应的数字。举个例子, 十进制13的
二进制表示为`0b1101`，那么转换为十进制的公式为`1*2^0 + 0*2^1 + 1*2^2 + 1*2^3`。
去掉`a(i)=0`的项，那么就成了`1*2^0 + 1*2^2 + 1*2^3`，也就是说十进制
`num=二进制位为1的位对应的值的和`.

## 树状数组

我们先考虑第一个问题，求前n项。

利用上述公式，我们可以把n进行分解。还以13为例，`13 = 0b1101 = 8 + 4 + 1`，接着
这个思维进行发散，如果我们要求的前13项分割成8、4、1三个部分，然后把各个部分的和
保存起来，放到对应的数组chunkSum里边，那么前13项的和就变成了这三部分的和。那么
现在问题就变成了如何划分成这些小部分的问题，也即如何求chunkSum的问题。

假设chunkSum[13]放1个，chunkSum[12]放4个，chunkSum[8]放8个，我们的问问题就解决
了。观察发现1，4，8刚好是13，12，8中从低位到高位第一个1所对应的十进制数字。
